{source}<?php
$fnameErr = $add1Err = $add2Err = $cityErr = $stateErr = $zipErr = "";
$fName = "ex: john";
$add1 = "ex: 1342 blank str.";
$add2 = "optional";
$city = "ex: Montgommery";
$state = "AL";
$zipcode = "ex: 99999";
$dbname = "purpleel_joom760";
$dusername = "admin";
$valid_users= array("error", "steve", "jim", "ducktape", "travelIan", "admin");
$valid_password = array("bad password", "12345", "jump2", "13Wrap!", "Troute43!", "Group31Password");
$userFnames = array("error", "steve S. Jones", "jim D. Anderson", "Diana Parkins", "Ian Mendola", "Alexander W. Brewer");
$userAdd1 = array("error", "6855 donahough Blvd.", "732 Swan Ln.", "1158 Lampkin Heights", "449 Ghola Dr.", "2485 Dominion Dr.");
$userAdd2 = array("error", "483 Patrician St.", "", "22232 Meadow Dr.", "358 Veinna St.", "4483 Grand Prarie Dr.");
$city = array("error", "Lubbock", "Macon", "Lakewood", "Killeen", "Houston");
$states = array("error", "TX", "GA", "CO", "TX", "TX");
$userzip = array("error", "28885", "44889", "55784", "44997043", "77450");
$user_index = "";


function test_input($data) {
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
return $data;
}
$username = "";
if(empty($_SESSION["username"]))
{
$username = "steve";
}
else
{
$username = $_SESSION["username"];
}

$uIndex = array_search($username, $valid_users);

if ($_SERVER["REQUEST_METHOD"] == "POST")
{
if (empty($_POST["fname"]))
{
$fnameErr = "Name is required";
}
else
{
$name = test_input($_POST["fname"]);
// check if name has too many characters
if (strlen($name)>50)
{
$fnameErr = "too many characters";
}
else
{
$userFnames[$uIndex]=$name;
}

$nadd1 = test_input($_POST["add1"]);
if (empty($_POST["add1"]))
{
$add1Err = "Address 1 is required";
}
else
{
if (strlen($nadd1)>100)
{
 $add1Err = "too many characters";
}
else
{
$userAdd1[$uIndex]=$nadd1;
}
}


$nadd2 = test_input($_POST["add2"]);
if (strlen($nadd2)>100)
{
 $add2Err = "too many characters";
}
else
{
$userAdd2[$uIndex]=$nadd2;
}
}

$ncity = test_input($_POST["city"]);
if (empty($_POST["city"]))
{
$cityErr = "city is required";
}
else
{
if (strlen($ncity)>100)
{
 $cityErr = "too many characters";
}
else
{
$city[$uIndex]=$ncity;
}
}


$nstate = test_input($_POST["states"]);
if (empty($_POST["states"]))
{
$stateErr = "state is required";
}
else
{
if (strlen($nstate)>2)
{
 $stateErr = "Invalid State Code";
}
else
{
$states[$uIndex]=$nstate;
}
}


$nzip = test_input($_POST["zip"]);
if (empty($_POST["zip"]))
{
$stateErr = "zipcode is required";
}
else if (!preg_match("/^\d*$/",$nzip))
{
$zipErr = "numbers only";
}
else
{
if (strlen($nzip)>9||strlen($nzip)<5)
{
 $zipErr = "Invalid Zipcode";
}
else
{
$userzip[$uIndex]=$nzip;
}
}

}

if($uIndex!=0)
{
if($userFnames[$uIndex]!="")
{
$fName = $userFnames[$uIndex];
}
if($userAdd1[$uIndex]!="")
{
$add1 = $userAdd1[$uIndex];
}
if($userAdd2[$uIndex]!="")
{
$add2= $userAdd2[$uIndex];
}
if($city[$uIndex]!="")
{
$city = $city[$uIndex];
}
if($states[$uIndex]!="")
{
$state = $states[$uIndex];
}
if($userzip[$uIndex]!="")
{
$zipcode = $userzip[$uIndex];
}
}

?>


<body>

<h2>complete Profile</h2>

<form action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" method="post">
<div class="container">
<label for="fname"><b>Enter Your Full name</b></label>
<input type="text" value="<?php echo $fName ?>" name="fname" required maxlength="50">
<span class="error">* <?php echo $fnameErr;?></span>
<br> <br>

<label for="add1"><b>Address1:</b></label>
<input type="text" value="<?php echo $add1 ?>" name="add1" required maxlength="100">
<span class="error">* <?php echo $add1Err;?></span>
<br> <br>
<label for="add2"><b>Address2:</b></label>
<input type="text" value="<?php echo $add2 ?>" name="add2" maxlength="100">
<?php if($add2Err!="") echo "<span class='error'>* "+$add2Err+"></span>";?>
<br> <br>
<label for="city"><b>City:</b></label>
<input type="text" value="<?php echo $city ?>" name="city" required maxlength="100">
<span class="error">* <?php echo $cityErr;?></span>
 <label for="States">State:</label>
<select name="states" id="state">
<option <?php if ($state == "AL" ) echo ' selected ' ?> value="AL">Alabama</option>
<option <?php if ($state == "AK" ) echo 'selected' ?> value="AK">Alaska</option>
<option <?php if ($state == "AZ" ) echo 'selected' ?> value="AZ">Arizona</option>
<option <?php if ($state == "AR" ) echo 'selected' ?> value="AR">Arkansas</option>
<option <?php if ($state == "CA" ) echo 'selected' ?> value="CA">California</option>
<option <?php if ($state == "CO" ) echo 'selected' ?> value="CO">Colorado</option>
<option <?php if ($state == "CT" ) echo 'selected' ?> value="CT">Connecticut</option>
<option <?php if ($state == "DE" ) echo 'selected' ?> value="DE">Delaware</option>
<option <?php if ($state == "FL" ) echo 'selected' ?> value="FL">Florida</option>
<option <?php if ($state == "GA" ) echo 'selected' ?> value="GA">Georgia</option>
<option <?php if ($state == "HI" ) echo 'selected' ?> value="HI">Hawaii</option>
<option <?php if ($state == "ID" ) echo 'selected' ?> value="ID">Idaho</option>
<option <?php if ($state == "IL" ) echo 'selected' ?> value="IL">Illinois</option>
<option <?php if ($state == "IN" ) echo 'selected' ?> value="IN">Indiana</option>
<option <?php if ($state == "IA" ) echo 'selected' ?> value="IA">Iowa</option>
<option <?php if ($state == "KS" ) echo 'selected' ?> value="KS">Kansas</option>
<option <?php if ($state == "KY" ) echo 'selected' ?> value="KY">Kentucky</option>
<option <?php if ($state == "LA" ) echo 'selected' ?> value="LA">Louisiana</option>
<option <?php if ($state == "ME" ) echo 'selected' ?> value="ME">Maine</option>
<option <?php if ($state == "MD" ) echo 'selected' ?> value="MD">Maryland</option>
<option <?php if ($state == "MA" ) echo 'selected' ?> value="MA">Massachusetts</option>
<option <?php if ($state == "MI" ) echo 'selected' ?> value="MI">Michigan</option>
<option <?php if ($state == "MN" ) echo 'selected' ?> value="MN">Minnesota</option>
<option <?php if ($state == "MS" ) echo 'selected' ?> value="MS">Mississippi</option>
<option <?php if ($state == "MO" ) echo 'selected' ?> value="MO">Missouri</option>
<option <?php if ($state == "MT" ) echo 'selected' ?> value="MT">Montana</option>
<option <?php if ($state == "NE" ) echo 'selected' ?> value="NE">Nebraska</option>
<option <?php if ($state == "NV" ) echo 'selected' ?> value="NV">Nevada</option>
<option <?php if ($state == "NH" ) echo 'selected' ?> value="NH">New Hampshire</option>
<option <?php if ($state == "NJ" ) echo 'selected' ?> value="NJ">New Jersey</option>
<option <?php if ($state == "NM" ) echo 'selected' ?> value="NM">New Mexico</option>
<option <?php if ($state == "NY" ) echo 'selected' ?> value="NY">New York</option>
<option <?php if ($state == "NC" ) echo 'selected' ?> value="NC">North Carolina</option>
<option <?php if ($state == "ND" ) echo 'selected' ?> value="ND">North Dakota</option>
<option <?php if ($state == "OH" ) echo 'selected' ?> value="OH">Ohio</option>
<option <?php if ($state == "OK" ) echo 'selected' ?> value="OK">Oklahoma</option>
<option <?php if ($state == "OR" ) echo 'selected' ?> value="OR">Oregon</option>
<option <?php if ($state == "PA" ) echo 'selected' ?> value="PA">Pennsylvania</option>
<option <?php if ($state == "RI" ) echo 'selected' ?> value="RI">Rhode Island</option>
<option <?php if ($state == "SC" ) echo 'selected' ?> value="SC">South Carolina</option>
<option <?php if ($state == "SD" ) echo 'selected' ?> value="SD">South Dakota</option>
<option <?php if ($state == "TN" ) echo 'selected' ?> value="TN">Tennessee</option>
<option <?php if ($state == "TX" ) echo 'selected' ?> value="TX">Texas</option>
<option <?php if ($state == "UT" ) echo 'selected' ?> value="UT">Utah</option>
<option <?php if ($state == "VT" ) echo 'selected' ?> value="VT">Vermont</option>
<option <?php if ($state == "VA" ) echo 'selected' ?> value="VA">Virginia</option>
<option <?php if ($state == "WA" ) echo 'selected' ?> value="WA">Washington</option>
<option <?php if ($state == "WV" ) echo 'selected' ?> value="WV">West Virginia</option>
<option <?php if ($state == "WI" ) echo 'selected' ?> value="WI">Wisconsin</option>
<option <?php if ($state == "WY" ) echo 'selected' ?> value="WY">Wyoming</option>
</select>
<span class="error">* <?php echo $stateErr;?></span>

<br> <br>
<label for="zip"><b>Zipcode</b></label>
<input type="text" value="<?php echo $zipcode ?>" name="zip" required maxlength=9 minlength=5>
<span class="error">* <?php echo $zipErr;?></span>

<br> <br>
<button type="submit">Complete Profile</button>
</div>

</form><body>{/source}